<head>
  <title>Login</title>
  <meta charset="utf-8">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="icon" type="image/png" href="./fav.png">
  <link rel="stylesheet" href="./style.css">
</head>

<body id="login-page">
  <div class="row">
    <div class="col-md-4"></div>
    <div class="col-md-4">
      <img class="mx-4" src="./logo.png" alt="logo">
    </div>
    <div class="col-md-4"></div>
  </div>

  <div class="mx-4">
    <div class="row">
      <div class="col-md-4">
        <img class="float-right" src="./meme.jpg" alt="meme">
      </div>
      <div class="col-md-4">
        <div class="form-group">
          <div class="text-center text-dark">
            <h2>Is this good for the company?</h2>
          </div>
          <div class="form-group px-2">
            <input id="username" onkeydown="handleLogin(event)" name="username" type="text" class="form-control"
              placeholder="Username" required="required" autofocus>
          </div>
          <div class="form-group px-2">
            <input id="password" onkeydown="handleLogin(event)" name="password" type="password" class="form-control"
              placeholder="Password" required="required">
          </div>
          <div class="form-group px-2">
            <button onclick="handleLogin()" type="button" class="btn btn-primary btn-block">Log in</button>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <img class="float-left" src="./peter.jpg" alt="peter">
      </div>
    </div>
  </div>


</body>

<script>
  "use strict";

  function handleLogin(event) {
    if (event != null && event.keyCode != 13) {
      return;
    }
    let user = document.getElementById('username').value;
    let pass = document.getElementById('password').value;
    let body = `username=${user}&password=${pass}`;

    let xhttp = new XMLHttpRequest();
    xhttp.open("POST", 'http://localhost:8080/project1/api/user/login.do');

    xhttp.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");

    xhttp.onreadystatechange = function () {
      if (this.readyState === XMLHttpRequest.DONE && this.status === 200) {

        window.location.href = "http://localhost:8080/project1/dashboard.html";
      }
    }
    xhttp.send(body);
  }
</script>